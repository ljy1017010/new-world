!function(e){e.fn.drag=function(n){function d(){o.removeClass("handler_bg").addClass("handler_ok_bg"),c.text("验证通过"),t.css({color:"#fff"}),o.unbind("mousedown"),e(document).unbind("mousemove"),e(document).unbind("mouseup")}var s,t=this,a=!1,i={},n=e.extend(i,n);this.append('<div class="drag_bg"></div><div class="drag_text" id="drag_text" onselectstart="return false;" unselectable="on">请按住滑块，拖动到最右边</div><div class="handler handler_bg"></div>');var o=t.find(".handler"),u=t.find(".drag_bg"),c=t.find(".drag_text"),r=t.width()-o.width();o.mousedown(function(e){a=!0,s=e.pageX-parseInt(o.css("left"),10)}),e(document).mousemove(function(e){var n=e.pageX-s;a&&(n>0&&n<=r?(o.css({left:n}),u.css({width:n})):n>r&&d())}).mouseup(function(e){a=!1,e.pageX-s<r&&(o.css({left:0}),u.css({width:0}))})}}(jQuery);